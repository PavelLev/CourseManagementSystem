(function(n,t){t(["./kendo.editor"],n)})(function(){return function(n,t){var i=window.kendo,r=i.ui,u=r.Editor,e=n.extend,o=n.proxy,f=u.extend({init:function(t,r){var e=this,r=r||{},y=r.height||105,p=r.field,s=r.tool||"insertImage",h=r.multipleInsert||!1,w=r.multipleUpload||!0,g=r.multipleDetele||!0,c=r.fileTypes||"*.png,*.jpg,*.gif",f=r.url||i.ui.options.url||"/api/Oss",l=r.fileUrl||i.ui.options.fileUrl,b=r.imageUrl||i.ui.options.imageUrl||l,k=r.thumbnailUrl||i.ui.options.thumbnailUrl||f.trimEnd("/")+"/Thumbnail",a=r.browserDialogOpen||i.ui.options.browserDialogOpen||null,o=r.editorOptions||null,d=n.extend(!0,{read:{url:f.trimEnd("/")+"/Read",type:"GET",data:{searchPattern:c}},destroy:{url:f.trimEnd("/")+"/Delete",type:"POST"},create:{url:f.trimEnd("/")+"/Create",type:"POST"},uploadUrl:f.trimEnd("/")+"/Save",fileUrl:l,imageUrl:b,thumbnailUrl:k},r.transport),v={fileTypes:c,transport:d};r=n.extend(!0,{tool:s,tools:[{name:s,exec:function(){if(!h){var t=n(this).data("kendoEditor"),i=t.createRange();i.selectNodeContents(t.body);t.selectRange(i)}}},{name:"cleanFormatting",tooltip:"删除",exec:function(t){var i,r;t.preventDefault();t.stopPropagation();i=n(this).data("kendoEditor");h||(r=i.createRange(),r.selectNodeContents(i.body),i.selectRange(r),o&&(o.model[p]="",o.model.dirty=!0));i.exec("inserthtml",{value:""})}}],imageBrowser:v,fileBrowser:v,dialogOptions:{open:function(t){var r=this.element,u=n(".k-filebrowser",r).data("kendoFileBrowser"),f=n(".k-imagebrowser",r).data("kendoImageBrowser"),e=n(".k-upload input",r).data("kendoUpload");n(".k-edit-label",r).each(function(t,i){var r=n(i),f=r.next(".k-edit-field"),e=r.children("label"),u=e.attr("for");r.attr("label-container-for",u);f.attr("data-container-for",u)});n("#k-editor-image-height",r).val(100).attr("readonly",!0);e.setOptions({multiple:w,upload:function(n){var t=f||u,o=t.options,s=o.fileTypes,h=new RegExp(("("+s.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),e=n.files[0].name,r;if(h.test(e))if(n.data={path:t.path()},r=t._createFile(e),r){r._uploading=!0;t.upload.one("success",function(){delete r._uploading;t._tiles=t.listView.items().filter("["+i.attr("type")+"=f]");t._scroll()})}else n.preventDefault();else n.preventDefault(),t._showMessage(i.format(o.messages.invalidFileType,e,s))}});typeof a=="function"&&a.call(this,t)}}},r);r.name="Editor";u.fn.init.call(e,t,r);n(e.body).attr("contenteditable",!1);e.wrapper.find(".k-editable-area").height(y)},options:{name:"ResourceEditor"},value:function(u){var f=this;if(u===t)return f.options.tool=="insertImage"?n(f.body).find("img").map(function(){return n(this).attr("src")}).toArray().join(";"):n(f.body).find("a").map(function(){return n(this).attr("href")}).toArray().join(";");u===r.editor.emptyElementContent&&(u="");u=u&&u.split(";").map(function(n){return f.options.tool=="insertImage"?i.format('<img alt="" height="100" src="{0}">',n):i.format('<a href="{0}">{0}<\/a>',n)}).join("");i.ui.Editor.fn.value.call(f,u)},exec:function(t,r){var u=this,s,e,f=null,c=n.extend,l=n.proxy,h=i.ui.Editor,o;if(!t)throw new Error("kendoEditor.exec(): `name` parameter cannot be empty");if(t=t.toLowerCase(),u.keyboard.isTypingInProgress()||u.restoreSelection(),e=u.toolbar.toolById(t),!e)for(o in h.defaultTools)if(o.toLowerCase()==t){e=h.defaultTools[o];break}if(e){if(s=u.getRange(),e.command&&(f=e.command(c({range:s},r))),u.trigger("execute",{name:t,command:f}),/^(undo|redo)$/i.test(t))u.undoRedoStack[t]();else if(f&&(f.managesUndoRedo||u.undoRedoStack.push(f),f.editor=u,f.exec(),f.async)){f.change=l(u._selectionChange,u);return}u._selectionChange()}}});r.plugin(f)}(window.kendo.jQuery),window.kendo},typeof define=="function"&&define.amd?define:function(n,t){t()});